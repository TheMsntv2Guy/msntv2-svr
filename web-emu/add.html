<!-- MSN TV 2 Port for modern browsers (by: thatdingus_) THIS MAY NOT BE ACCURATE!! -->
<!-- File Name: add.html -->
<!-- A page that adds data to LocalStorage. That's it-->
<!DOCTYPE HTML>
<head>
    <title>add</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <script>
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        var nameParam = getParameterByName('name');
        var dataParam = getParameterByName('data');
        var redirectURI = getParameterByName('r')

        if (nameParam !== null && dataParam !== null) {
            localStorage.setItem(nameParam, dataParam);
            console.log('Values added to localStorage:', nameParam, '=', dataParam);
            window.location.href = redirectURI;
        }
</script>
<p>If you can see this, you didn't add a redirectURI to the params. Please fix and try again later.</p>
</body>